<div class="container mt-5">
  <div class="card mx-auto shadow-lg" style="max-width: 600px;">
    <div class="text-center mb-6 mt-3">
      <h3>Mettre à jour le profil</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="updateProfile()" #profileForm="ngForm" class="bg-light p-4 rounded">
        
        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label">Email :</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="user.email"
            name="email"
            required
            email
            class="form-control"
            #emailField="ngModel"
          />
          <div *ngIf="emailField.invalid && emailField.touched" class="text-danger">
            <small *ngIf="emailField.errors?.['required']">L'email est obligatoire.</small>
            <small *ngIf="emailField.errors?.['email']">Le format de l'email est invalide.</small>
          </div>
        </div>

        <!-- Mot de passe -->
        <div class="mb-3">
          <label for="password" class="form-label">Mot de passe :</label>
          <input
            type="password"
            id="password"
            [(ngModel)]="user.password"
            name="password"
            required
            minlength="6"
            class="form-control"
            #passwordField="ngModel"
          />
          <div *ngIf="passwordField.invalid && passwordField.touched" class="text-danger">
            <small *ngIf="passwordField.errors?.['required']">Le mot de passe est obligatoire.</small>
            <small *ngIf="passwordField.errors?.['minlength']">
              Le mot de passe doit contenir au moins 6 caractères.
            </small>
          </div>
        </div>

        <!-- Adresse -->
        <div *ngIf="user.role !== 'ADMIN'">
          <div class="mb-3">
            <label for="address" class="form-label">Adresse :</label>
            <input
              type="text"
              id="address"
              [(ngModel)]="user.address"
              name="address"
              class="form-control"
              #addressField="ngModel"
            />
          </div>

          <!-- Téléphone -->
          <div class="mb-3">
            <label for="phone" class="form-label">Téléphone :</label>
            <input
              type="text"
              id="phone"
              [(ngModel)]="user.phone"
              name="phone"
              required
              pattern="^[0-9]+$"
              class="form-control"
              #phoneField="ngModel"
            />
            <div *ngIf="phoneField.invalid && phoneField.touched" class="text-danger">
              <small *ngIf="phoneField.errors?.['required']">Le numéro de téléphone est obligatoire.</small>
              <small *ngIf="phoneField.errors?.['pattern']">Le numéro doit contenir uniquement des chiffres.</small>
            </div>
          </div>
        </div>

        <!-- Bouton -->
        <div class="text-center">
          <button type="submit" class="btn btn-primary w-100" [disabled]="profileForm.invalid">
            Enregistrer
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
