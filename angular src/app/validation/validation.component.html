<div class="container mt-5">
  <h2 class="text-center mb-4">Gestion des Validations</h2>

  <!-- Affichage lorsque la liste est vide -->
  <div *ngIf="utilisateurs.length === 0; else userList" class="text-center">
    <p class="text-muted">Nombre d'utilisateurs: {{ utilisateurs.length }}</p>
    <p class="text-muted">Aucun utilisateur à afficher.</p>
  </div>

  <!-- Liste des utilisateurs -->
  <ng-template #userList>
    <div class="table-responsive">
      <h3>Liste des Utilisateurs</h3>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Email</th>
            <th>Type</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Parcours des utilisateurs -->
          <tr *ngFor="let utilisateur of utilisateurs">
            <td>{{ utilisateur.id }}</td>
            <td>{{ utilisateur.nom }} {{ utilisateur.prenom }}</td>
            <td>{{ utilisateur.email }}</td>
            <td>{{ utilisateur.type }}</td>
            <td>
              <span
                class="badge p-2"
                [ngClass]="{
                  'bg-warning text-dark': utilisateur.statut === 0,
                  'bg-success': utilisateur.statut === 1,
                  'bg-danger': utilisateur.statut === -1
                }"
              >
                <!-- Affichage de texte en fonction du statut -->
                {{ utilisateur.statut === 0 ? 'En attente' : (utilisateur.statut === 1 ? 'Validé' : 'Rejeté') }}
              </span>
            </td>
            <td>
              <button
                class="btn btn-success btn-sm me-2"
                (click)="validerUtilisateur(utilisateur)"
                [disabled]="utilisateur.statut !== 0"
              >
                Valider
              </button>
              <button
                class="btn btn-danger btn-sm"
                (click)="refuserUtilisateur(utilisateur)"
                [disabled]="utilisateur.statut !== 0"
              >
                Refuser
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-template>
</div>
